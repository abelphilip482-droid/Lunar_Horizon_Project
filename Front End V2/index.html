<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunar Horizon Mapper</title>

    <!-- Fonts & Tailwind -->
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@300;400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Three.js -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js"
        }
      }
    </script>
</head>

<body class="bg-[#0b0f19] text-white font-['Inter'] selection:bg-blue-500 selection:text-white">

    <!-- background effects -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="absolute inset-0 bg-gradient-to-b from-[#0b0f19] via-[#0f1525] to-[#0b0f19]"></div>
        <div
            class="absolute top-0 right-0 w-[500px] h-[500px] bg-blue-500/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2">
        </div>
        <div
            class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-cyan-500/10 rounded-full blur-[100px] translate-y-1/2 -translate-x-1/2">
        </div>
    </div>

    <!-- Web Components -->
    <app-navbar active="home"></app-navbar>

    <main class="relative z-10">

        <!-- HERO SECTION -->
        <section class="relative min-h-[90vh] flex items-center justify-center px-6 overflow-hidden">
            <div class="max-w-7xl w-full grid lg:grid-cols-2 gap-12 items-center">

                <!-- Left Text -->
                <div class="space-y-8 reveal-on-scroll">
                    <div
                        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-semibold tracking-wider uppercase mb-2">
                        <span class="w-2 h-2 rounded-full bg-blue-400 animate-pulse"></span>
                        Mission Critical Data
                    </div>

                    <h1
                        class="font-['Orbitron'] text-5xl md:text-7xl font-bold leading-tight bg-clip-text text-transparent bg-gradient-to-r from-white via-blue-100 to-gray-400 drop-shadow-[0_0_15px_rgba(255,255,255,0.1)]">
                        Map Sunlight <br />
                        <span class="text-blue-400 glow-text">on the Moon</span>
                    </h1>

                    <p
                        class="text-gray-400 text-lg md:text-xl leading-relaxed max-w-xl border-l-2 border-blue-500/30 pl-6">
                        Advanced terrain-aware solar exposure analysis for mission planning,
                        power generation optimization, and rover pathfinding operations.
                    </p>

                    <div class="flex flex-wrap gap-4 pt-4">
                        <a href="calculator.html"
                            class="group relative px-8 py-4 bg-blue-500 text-white font-bold rounded-lg overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(59,130,246,0.4)]">
                            <div
                                class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]">
                            </div>
                            <span>Launch Calculator</span>
                        </a>

                        <a href="about.html"
                            class="px-8 py-4 bg-[#111827] border border-gray-700 text-gray-300 font-semibold rounded-lg hover:border-blue-400 hover:text-white transition-all hover:bg-[#1a2235]">
                            Learn More
                        </a>
                    </div>

                    <!-- Stats -->
                    <div class="grid grid-cols-2 gap-6 pt-8 border-t border-gray-800/50">
                        <div>
                            <p class="text-3xl font-['Orbitron'] font-bold text-white">99.8%</p>
                            <p class="text-sm text-gray-500 uppercase tracking-widest">Accuracy</p>
                        </div>
                        <div>
                            <p class="text-3xl font-['Orbitron'] font-bold text-white">&lt;0.5s</p>
                            <p class="text-sm text-gray-500 uppercase tracking-widest">Latency</p>
                        </div>
                    </div>
                </div>

                <!-- Right 3D Moon -->
                <div
                    class="relative h-[400px] w-full flex items-center justify-center reveal-on-scroll animate-delay-200 group cursor-grab active:cursor-grabbing">
                    <!-- 3D Container -->
                    <div id="moonContainer"
                        class="w-full h-full relative z-10 transition-transform duration-700 ease-out group-hover:scale-105">
                    </div>

                    <!-- Decorative Orbits -->
                    <div
                        class="absolute w-[100%] h-[100%] border border-blue-500/5 rounded-full animate-[spin_60s_linear_infinite] pointer-events-none">
                    </div>
                    <div
                        class="absolute w-[70%] h-[70%] border border-cyan-500/10 rounded-full animate-[spin_40s_linear_infinite_reverse] pointer-events-none">
                    </div>
                </div>
            </div>

            <!-- Scroll Indicator -->
            <div
                class="absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 opacity-50 animate-bounce">
                <span class="text-xs uppercase tracking-widest">Scroll</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                </svg>
            </div>
        </section>

        <!-- FEATURES SECTION -->
        <section class="relative py-24 px-6 bg-[#0b0f19]/80 backdrop-blur-sm">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16 reveal-on-scroll">
                    <h2 class="font-['Orbitron'] text-4xl font-bold mb-4">Core Capabilities</h2>
                    <p class="text-gray-400 max-w-2xl mx-auto">Essential tools designed for the next generation of lunar
                        exploration.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Feature 1 -->
                    <div
                        class="group glass-panel p-8 rounded-2xl hover:bg-[#1f2937]/50 transition-all hover:-translate-y-2 reveal-on-scroll animate-delay-100">
                        <div
                            class="w-14 h-14 bg-blue-500/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-blue-500/20 transition-colors">
                            <svg class="w-8 h-8 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                            </svg>
                        </div>
                        <h3 class="font-['Orbitron'] text-xl font-bold mb-3 text-white">Solar Exposure</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Compute precise total sunlight hours for any lunar coordinate over a specified time window.
                        </p>
                    </div>

                    <!-- Feature 2 -->
                    <div
                        class="group glass-panel p-8 rounded-2xl hover:bg-[#1f2937]/50 transition-all hover:-translate-y-2 reveal-on-scroll animate-delay-200">
                        <div
                            class="w-14 h-14 bg-cyan-500/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-cyan-500/20 transition-colors">
                            <svg class="w-8 h-8 text-cyan-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2" />
                            </svg>
                        </div>
                        <h3 class="font-['Orbitron'] text-xl font-bold mb-3 text-white">Terrain Modeling</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Visualize complex horizon obstructions from craters, ridges, and valleys in 3D.
                        </p>
                    </div>

                    <!-- Feature 3 -->
                    <div
                        class="group glass-panel p-8 rounded-2xl hover:bg-[#1f2937]/50 transition-all hover:-translate-y-2 reveal-on-scroll animate-delay-300">
                        <div
                            class="w-14 h-14 bg-purple-500/10 rounded-xl flex items-center justify-center mb-6 group-hover:bg-purple-500/20 transition-colors">
                            <svg class="w-8 h-8 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h3 class="font-['Orbitron'] text-xl font-bold mb-3 text-white">Rover Planning</h3>
                        <p class="text-gray-400 leading-relaxed text-sm">
                            Estimate critical charging windows and power generation capabilities for mobile assets.
                        </p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <app-footer></app-footer>

    <!-- Main JS (Shared Logic) -->
    <script defer src="js/main.js"></script>

    <!-- Page Specific 3D Script -->
    <script type="module">
        import * as THREE from 'three';

        // Wait for container
        const container = document.getElementById("moonContainer");

        if (container) {
            // Scene Setup
            const scene = new THREE.Scene();

            // Camera
            const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 5.5;

            // Renderer
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            // Tone mapping for realistic lighting
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.outputColorSpace = THREE.SRGBColorSpace;

            container.appendChild(renderer.domElement);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5); // Soft ambient
            scene.add(ambientLight);

            const sunLight = new THREE.DirectionalLight(0xffffff, 2.0);
            sunLight.position.set(5, 3, 5);
            scene.add(sunLight);

            // Blue rim light for space feel
            const rimLight = new THREE.SpotLight(0x4c8bf5, 5);
            rimLight.position.set(-5, 0, 2);
            rimLight.lookAt(0, 0, 0);
            scene.add(rimLight);

            // Moon Mesh
            const textureLoader = new THREE.TextureLoader();
            const geometry = new THREE.SphereGeometry(1.6, 128, 128); // Higher poly for bump/displacement if added later

            // Using a standard material for better lighting reaction
            const material = new THREE.MeshStandardMaterial({
                map: textureLoader.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/moon_1024.jpg"),
                roughness: 0.8,
                metalness: 0.1,
            });
            const moon = new THREE.Mesh(geometry, material);
            scene.add(moon);

            // Starfield Background
            const starsGeometry = new THREE.BufferGeometry();
            const starsCount = 2000;
            const posArray = new Float32Array(starsCount * 3);

            for (let i = 0; i < starsCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 50;
            }

            starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const starsMaterial = new THREE.PointsMaterial({
                size: 0.05,
                color: 0xffffff,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });
            const starField = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(starField);


            // Animation Logic
            const clock = new THREE.Clock();

            function animate() {
                requestAnimationFrame(animate);

                const time = clock.getElapsedTime();

                // Slow rotation
                moon.rotation.y += 0.002;

                // Subtle floating effect
                moon.position.y = Math.sin(time * 0.5) * 0.1;

                // Subtle star twinkle (rotation)
                starField.rotation.y -= 0.0005;

                renderer.render(scene, camera);
            }

            animate();

            // Handle Resize
            window.addEventListener('resize', () => {
                const width = container.clientWidth;
                const height = container.clientHeight;
                renderer.setSize(width, height);
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
            });
        }
    </script>

</body>

</html>